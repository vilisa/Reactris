(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(21)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(8),r=a.n(i),o=(a(16),a(1)),c=a(2),l=a(5),u=a(3),h=a(4),p=(a(17),{GAME_WIDTH:10,GAME_HEIGHT:16,MINIMUM_WIDTH:5,MINIMUM_HEIGHT:5,GAME_TICK:750,MOVEMENT_INTERVAL:150,DEBUG:!1}),d=[[[1,1],[1,1]]],m=[[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]],[[1,0,0],[1,1,1],[0,0,0]]],v=[[[1,1,0],[0,1,0],[0,1,0]],[[0,0,1],[1,1,1],[0,0,0]],[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]]],f=[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]],_=[[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]],g=[[[0,1,0],[0,1,1],[0,0,1]],[[0,0,0],[0,1,1],[1,1,0]],[[1,0,0],[1,1,0],[0,1,0]],[[0,1,1],[1,1,0],[0,0,0]]],b=[[[0,0,1],[0,1,1],[0,1,0]],[[0,0,0],[1,1,0],[0,1,1]],[[0,1,0],[1,1,0],[1,0,0]],[[1,1,0],[0,1,1],[0,0,0]]],E={getShape:function(e,t){var a;switch(e){case"O":a=d;break;case"J":a=m;break;case"L":a=v;break;case"I":a=_;break;case"T":a=f;break;case"Z":a=g;break;case"S":a=b}return a[t]},getRotations:function(e){var t;switch(e){case"O":t=d;break;case"J":t=m;break;case"L":t=v;break;case"I":t=_;break;case"T":t=f;break;case"Z":t=g;break;case"S":t=b}return t}},w=function(){function e(t,a){Object(o.a)(this,e),this._shape=E.getShape(t,a),this._shapes=E.getRotations(t),this._rotation=a,this._pos_y=0,this._pos_x=Math.round(p.GAME_WIDTH/2-1-this.getOffset()),this._potential_shape=this._shape,this._potential_rotation=this._rotation,this._potential_pos_y=this._pos_y,this._potential_pos_x=this._pos_x}return Object(c.a)(e,[{key:"getOffset",value:function(){for(var e=1e3,t=0,a=0;a<this.shape.length;a++){t=0;for(var n=0;n<this.shape[a].length&&0===this.shape[a][n];n++)t++;t<e&&(e=t)}return e}},{key:"shape",get:function(){return this._shape},set:function(e){this._shape=e}},{key:"shapes",get:function(){return this._shapes},set:function(e){this._shapes=e}},{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e}},{key:"pos_y",get:function(){return this._pos_y},set:function(e){this._pos_y=e}},{key:"pos_x",get:function(){return this._pos_x},set:function(e){this._pos_x=e}},{key:"potential_shape",get:function(){return this._potential_shape},set:function(e){this._potential_shape=e}},{key:"potential_rotation",get:function(){return this._potential_rotation},set:function(e){this._potential_rotation=e}},{key:"potential_pos_y",get:function(){return this._potential_pos_y},set:function(e){this._potential_pos_y=e}},{key:"potential_pos_x",get:function(){return this._potential_pos_x},set:function(e){this._potential_pos_x=e}}]),e}(),k=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,null,[{key:"getNewBoard",value:function(){return Array(p.GAME_HEIGHT).fill(null).map(function(e){return Array(p.GAME_WIDTH).fill(0)})}},{key:"getNewRow",value:function(){return Array(p.GAME_WIDTH).fill(0)}},{key:"drawBoard",value:function(e){if(e.piece){for(var t=this.getNewBoard(),a=e.landed,n=e.piece,s=0;s<a.length;s++)for(var i=0;i<a[s].length;i++)0!==a[s][i]&&(t[s][i]=1);for(var r=0;r<n.shape.length;r++)for(var o=0;o<n.shape[r].length;o++)0!==n.shape[r][o]&&(t[r+n.pos_y][o+n.pos_x]=n.shape[r][o]);return t}}},{key:"scaleBoard",value:function(){var e=document.getElementById("scaler");if(e){var t=p.GAME_WIDTH/p.GAME_HEIGHT;e.style.width=e.offsetHeight*t+"px"}var a=document.getElementById("gameover-text");if(a){a.style.fontSize=.25*e.offsetWidth+"px"}}}]),e}(),y={log:function(e){p.DEBUG&&console.log(e)},validateMove:function(e){return!(e.paused||e.gameOver||!e.piece||!this.isSpaceAvailable(e))},isSpaceAvailable:function(e){var t=e.piece,a=e.landed;try{for(var n=0;n<t.potential_shape.length;n++)for(var s=0;s<t.potential_shape[n].length;s++)if(0!==t.potential_shape[n][s]&&0!==a[n+t.potential_pos_y][s+t.potential_pos_x])return!1;return!0}catch(i){return!1}},moveDown:function(e){return e.piece.potential_pos_y=e.piece.pos_y+1,this.validateMove(e)?(this.log("Down"),e.piece.pos_y=e.piece.potential_pos_y):this.landPiece(e),e},moveLeft:function(e){var t=e.piece;return t.potential_pos_x=t.pos_x-1,this.validateMove(e)?(this.log("Left"),t.pos_x=t.potential_pos_x):t.potential_pos_x=t.pos_x,t},moveRight:function(e){var t=e.piece;return t.potential_pos_x=t.pos_x+1,this.validateMove(e)?(this.log("Right"),t.pos_x=t.potential_pos_x):t.potential_pos_x=t.pos_x,t},hardDrop:function(e){for(this.log("Drop");;){if(e.piece.potential_pos_y=e.piece.pos_y+1,!this.validateMove(e)){this.landPiece(e);break}this.log("Down"),e.piece.pos_y=e.piece.potential_pos_y}return e},rotate:function(e){var t=e.piece;return t.potential_rotation=t.rotation+1,t.potential_rotation<t.shapes.length?t.potential_shape=t.shapes[t.potential_rotation]:(t.potential_rotation=0,t.potential_shape=t.shapes[0]),this.validateMove(e)?(t.shape=t.potential_shape,t.rotation=t.potential_rotation):(t.potential_rotation=t.rotation,t.potential_shape=t.shape),t},pause:function(e){return e.paused=!e.paused,e.paused?this.log("Pause"):this.log("Resume"),e.paused},reset:function(){return{score:0,linesCleared:0,paused:!1,gameOver:!1,board:k.getNewBoard(),landed:k.getNewBoard(),piece:this.spawnPiece()}},landPiece:function(e){if(!e.paused&&!e.gameOver&&e.piece){this.log("land piece");for(var t=e.piece,a=e.landed,n=0;n<t.shape.length;n++)for(var s=0;s<t.shape[n].length;s++)0!==t.shape[n][s]&&(a[n+t.pos_y][s+t.pos_x]=t.shape[n][s]);e.score=e.score+10,this.clearLines(e),this.checkGameOver(e)||(e.piece=this.spawnPiece())}return e},checkGameOver:function(e){for(var t=e.landed,a=0;a<t[0].length;a++)if(0!==t[0][a])return this.log("Game over"),e.gameOver=!0,!0;return!1},clearLines:function(e){this.log("clear Lines");for(var t=e.landed,a=0;a<t.length;a++){for(var n=!0,s=0;s<t[a].length;s++)0===t[a][s]&&(n=!1);n&&(t.splice(a,1),t.unshift(k.getNewRow()),e.linesCleared++,e.score=e.score+100)}},spawnPiece:function(){var e=["O","J","L","I","T","Z","S"][Math.floor(7*Math.random())];return new w(e,0)}},I=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"drawCol",value:function(e){return 0===e?s.a.createElement("div",{className:"col empty"}):s.a.createElement("div",{className:"col filled"})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"table"},this.props.state.map(function(t){return s.a.createElement("div",{className:"row",key:t.id},t.map(function(t){return e.drawCol(t)}))}))}}]),t}(n.Component),N=(a(18),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"paused",value:function(){if(this.props.state.paused)return s.a.createElement("span",{className:"blink"},"||")}},{key:"render",value:function(){return s.a.createElement("div",{className:"info"},this.paused(),s.a.createElement("span",{className:"score"},"Score: ",this.props.state.score,"    Lines: ",this.props.state.linesCleared))}}]),t}(n.Component)),M=(a(19),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).holding=function(e){switch(e){case"up":a.props.movePiece(y.rotate(a.props.state));break;case"down":a.props.setState(y.moveDown(a.props.state));break;case"left":a.props.movePiece(y.moveLeft(a.props.state));break;case"right":a.props.movePiece(y.moveRight(a.props.state))}},a.state={arrow_up_interval:null,arrow_down_interval:null,arrow_left_interval:null,arrow_right_interval:null},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"start",value:function(e){var t=setInterval(this.holding,p.MOVEMENT_INTERVAL,e);switch(e){case"up":this.setState({arrow_up_interval:t});break;case"down":this.setState({arrow_down_interval:t});break;case"left":this.setState({arrow_left_interval:t});break;case"right":this.setState({arrow_right_interval:t})}}},{key:"stop",value:function(e){switch(e){case"up":clearTimeout(this.state.arrow_up_interval);break;case"down":clearTimeout(this.state.arrow_down_interval);break;case"left":clearTimeout(this.state.arrow_left_interval);break;case"right":clearTimeout(this.state.arrow_right_interval)}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"buttons"},s.a.createElement("div",{className:"button"},s.a.createElement("button",{onClick:function(){return e.props.pause()}}),s.a.createElement("div",null,"Pause")),s.a.createElement("div",{className:"button"},s.a.createElement("button",{className:"reset",onClick:function(){return e.props.reset()}}),s.a.createElement("div",null,"Reset")),s.a.createElement("div",{className:"button drop"},s.a.createElement("button",{onClick:function(){return e.props.setState(y.hardDrop(e.props.state))}}),s.a.createElement("div",null,"Drop"))),s.a.createElement("div",{className:"arrows"},s.a.createElement("center",null,s.a.createElement("div",{className:"up-container"},s.a.createElement("button",{className:"arrow-up",id:"arrow-up",onClick:function(){return e.props.movePiece(y.rotate(e.props.state))},onPointerDown:function(){return e.start("up")},onPointerUp:function(){return e.stop("up")}})),s.a.createElement("div",{className:"left-right"},s.a.createElement("button",{className:"arrow-left",onClick:function(){return e.props.movePiece(y.moveLeft(e.props.state))},onPointerDown:function(){return e.start("left")},onPointerUp:function(){return e.stop("left")}}),s.a.createElement("span",{className:"spacer"},s.a.createElement("div",{className:"arrows"},s.a.createElement("i",{className:"up"}),s.a.createElement("i",{className:"left"}),s.a.createElement("i",{className:"right"}),s.a.createElement("i",{className:"down"}))),s.a.createElement("button",{className:"arrow-right",onClick:function(){return e.props.movePiece(y.moveRight(e.props.state))},onPointerDown:function(){return e.start("right")},onPointerUp:function(){return e.stop("right")}})),s.a.createElement("div",{className:"down-container"},s.a.createElement("button",{className:"arrow-down",onClick:function(){return e.props.setState(y.moveDown(e.props.state))},onPointerDown:function(){return e.start("down")},onPointerUp:function(){return e.stop("down")}})))))}}]),t}(n.Component)),O=a(9),S=a(6),T=(a(20),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={msg:"",width:p.GAME_WIDTH,height:p.GAME_HEIGHT,tick:p.GAME_TICK,number:100},a.handleChange=a.handleChange.bind(Object(S.a)(Object(S.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(O.a)({},t,a))}},{key:"save",value:function(){var e=this.state.width,t=this.state.height,a=this.state.tick;e>=p.MINIMUM_WIDTH?(p.GAME_WIDTH=parseInt(e),t>=p.MINIMUM_HEIGHT?(p.GAME_HEIGHT=parseInt(t),a>=0?(p.GAME_TICK=parseInt(a),this.props.reset()):this.setState({msg:"min tick: 0"})):this.setState({msg:"min height: "+p.MINIMUM_HEIGHT})):this.setState({msg:"min width: "+p.MINIMUM_WIDTH})}},{key:"increase",value:function(e){switch(e){case"width":this.setState({width:this.state.width+1});break;case"height":this.setState({height:this.state.height+1});break;case"tick":this.setState({tick:this.state.tick+10})}}},{key:"decrease",value:function(e){switch(e){case"width":this.setState({width:this.state.width-1}),this.state.width<=p.MINIMUM_WIDTH&&this.setState({width:p.MINIMUM_WIDTH});break;case"height":this.setState({height:this.state.height-1}),this.state.height<=p.MINIMUM_HEIGHT&&this.setState({height:p.MINIMUM_HEIGHT});break;case"tick":this.setState({tick:this.state.tick-10}),this.state.tick<=0&&this.setState({tick:0})}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"menu-container"},s.a.createElement("div",{className:"menu"},s.a.createElement("h1",null,"Settings"),s.a.createElement("div",{className:"body"},s.a.createElement("div",{className:"settings"},s.a.createElement("div",{className:"labels"},s.a.createElement("label",null,"width:"),s.a.createElement("br",null),s.a.createElement("label",null,"height:"),s.a.createElement("br",null),s.a.createElement("label",null,"Tick:")),s.a.createElement("div",{className:"inputs"},s.a.createElement("div",{className:"number-input"},s.a.createElement("button",{onClick:function(){return e.decrease("width")},tabIndex:"-1"},"-"),s.a.createElement("input",{name:"width",type:"number",value:this.state.width,onChange:this.handleChange,min:p.MINIMUM_WIDTH}),s.a.createElement("button",{onClick:function(){return e.increase("width")},tabIndex:"-1"},"+")),s.a.createElement("div",{className:"number-input"},s.a.createElement("button",{onClick:function(){return e.decrease("height")},tabIndex:"-1"},"-"),s.a.createElement("input",{name:"height",type:"number",value:this.state.height,onChange:this.handleChange,min:p.MINIMUM_HEIGHT}),s.a.createElement("button",{onClick:function(){return e.increase("height")},tabIndex:"-1"},"+")),s.a.createElement("div",{className:"number-input"},s.a.createElement("button",{onClick:function(){return e.decrease("tick")},tabIndex:"-1"},"-"),s.a.createElement("input",{name:"tick",type:"number",value:this.state.tick,onChange:this.handleChange,min:"0"}),s.a.createElement("button",{onClick:function(){return e.increase("tick")},tabIndex:"-1"},"+")))),s.a.createElement("div",{className:"controls"},s.a.createElement("button",{onClick:function(){return e.save()}},"Save"),this.state.msg))))}}]),t}(n.Component)),D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={score:0,linesCleared:0,paused:!1,gameOver:!1,intervalID:null,board:k.getNewBoard(),landed:k.getNewBoard(),piece:y.spawnPiece()},a.state.board=k.drawBoard(a.state),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.attachEventListeners(),this.startGame()}},{key:"startGame",value:function(){var e=this;clearInterval(this.state.intervalID);var t=setInterval(function(){e.setState(y.moveDown(e.state)),e.drawBoard()},p.GAME_TICK);this.setState({intervalID:t})}},{key:"drawBoard",value:function(){this.setState({board:k.drawBoard(this.state)})}},{key:"setPieceState",value:function(e){this.setState({piece:e},function(){this.drawBoard()})}},{key:"setWholeState",value:function(e){this.setState(e,function(){this.drawBoard()})}},{key:"pause",value:function(){var e=y.pause(this.state);this.setState({paused:e}),e?clearInterval(this.state.intervalID):this.startGame()}},{key:"paused",value:function(){var e=this;if(this.state.paused)return s.a.createElement(T,{state:this.state,pause:function(){e.pause()},reset:function(){e.reset()}})}},{key:"gameOver",value:function(){if(this.state.gameOver)return k.scaleBoard(),s.a.createElement("div",{className:"gameover"},s.a.createElement("span",{id:"gameover-text"},"GAME",s.a.createElement("br",null),"OVER"))}},{key:"reset",value:function(){this.setState(y.reset(),function(){this.setState({board:k.drawBoard(this.state)})}),k.scaleBoard(),this.startGame()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"main-container"},s.a.createElement("div",{className:"gameboy"},s.a.createElement("div",{className:"reactris-container"},s.a.createElement("div",{className:"screen"},this.paused(),this.gameOver(),s.a.createElement("div",{id:"scaler"},s.a.createElement(I,{state:this.state.board})),s.a.createElement(N,{state:this.state})),s.a.createElement("div",{className:"controls"},s.a.createElement(M,{state:this.state,movePiece:function(t){e.setPieceState(t)},setState:function(t){e.setWholeState(t)},pause:function(){e.pause()},reset:function(){e.reset()}})))),s.a.createElement("div",{className:"debug-container"},s.a.createElement("div",{className:"debug-board"},"Landed Debug",s.a.createElement(I,{state:this.state.landed})),s.a.createElement("div",{className:"debug-board"},"Piece Debug",s.a.createElement(I,{state:this.state.piece.shape}))))}},{key:"attachEventListeners",value:function(){var e=this;window.onload=function(){k.scaleBoard()},window.addEventListener("resize",k.scaleBoard.bind(this)),window.addEventListener("touchstart",function(){document.oncontextmenu=function(){return!1}}),document.addEventListener("keydown",function(t){if(e.state.piece)switch(t.code){case"ArrowUp":e.setPieceState(y.rotate(e.state));break;case"ArrowDown":e.setWholeState(y.moveDown(e.state));break;case"ArrowLeft":e.setPieceState(y.moveLeft(e.state));break;case"ArrowRight":e.setPieceState(y.moveRight(e.state));break;case"Space":e.setWholeState(y.hardDrop(e.state));break;case"Escape":e.pause()}})}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,1,2]]]);
//# sourceMappingURL=main.d7e8fec5.chunk.js.map